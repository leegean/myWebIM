[11:33:09.655][DEBUG][ThreadMsgDispatcher:108] QQActorDispatcher enter action loop...
[11:33:09.655][DEBUG][ThreadActorDispatcher:92] QQActorDispatcher enter action loop...
[11:33:14.852][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=login_param, value=daid%3D164%26target%3Dself%26style%3D5%26mibao_css%3Dm_webqq%26appid%3D1003903%26enable_qlogin%3D0%26no_verifyimg%3D1%26s_url%3Dhttp%253A%252F%252Fweb2.qq.com%252Floginproxy.html%26f_url%3Dloginerroralert%26strong_login%3D1%26login_state%3D10%26t%3D20130723001, domain=ui.ptlogin2.qq.com, path=/, expired=null]
[11:33:14.853][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=uikey, value=6adb669ab420aae84fc42abf394c96c56bb4c2a67987b8ed63c048c9f3af6b4d, domain=ptlogin2.qq.com, path=/, expired=null]
[11:33:14.853][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=pt_user_id, value=1393340257023692997, domain=ui.ptlogin2.qq.com, path=/, expired=null]
[11:33:14.854][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptui_identifier, value=000E011740274E1B49611362EB4494F5010010C905B607699922FF240C2E, domain=ui.ptlogin2.qq.com, path=/, expired=null]
[11:33:14.978][DEBUG][GetLoginSigAction:80] text/html
[11:33:14.980][DEBUG][GetLoginSigAction:90] <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"><script>var g_begTime=new Date;</script><style type="text/css">u{text-decoration:none;white-space:nowrap}*{font-family:Tahoma,Verdana,Arial,Helvetica,sans-serif;font-size:12px}body{margin:0;padding:0;background:#f6f6f6}form{margin:0;padding:0}img{border:0 none}a{text-decoration:none}em{font-style:normal}.clearer{clear:both;display:block;font-size:1px;height:1px;margin:0;padding:0}.signin{width:360px;margin:0 auto;float:none;padding:0}.signin .subcolumn01 .middle{float:left;width:296px;height:40px}.signin .subcolumn01 .middle span{line-height:40px;color:#000;font-weight:bold;font-size:14px;padding-left:4em}.signin .subcolumn02{width:356px;overflow:hidden;zoom:1;padding-bottom:10px}.strong-login .signin .subcolumn02{padding-top:20px}.signin .subcolumn02 .signin-area{padding:1px 17px;margin:0 0 0 40px}.signin .subcolumn02 .signin-area-bg{float:left;width:296px}.signin .subcolumn02 .signin-area-bg .padder{margin:8px 0 0}.signin .subcolumn02 .signin-area-bg .padder .sign-input{margin:14px 0 0 0}.signin .subcolumn02 .signin-area-bg .padder span.title{width:60px;height:20px;margin-right:5px;_margin-top:2px;text-indent:-999em;float:left;background:url("/style.ssl/5/images/login_btn.png") no-repeat}.signin .subcolumn02 .signin-area-bg .padder span.account{background-position:0 -36px}.signin .subcolumn02 .signin-area-bg .padder span.password{background-position:-60px -36px}.signin .subcolumn02 .signin-area-bg .padder span.code{background-position:-120px -36px}.signin .subcolumn02 .signin-area-bg .padder span.input{display:block}.signin .subcolumn02 .signin-area-bg .padder span.input a{margin-left:7px;text-decoration:underline;color:#3472a3}.signin .subcolumn02 .signin-area-bg .padder span.expand{padding-left:5.9em;-moz-user-select:none;-khtml-user-select:none;width:200px}*:lang(en) .signin .subcolumn02 .signin-area-bg .padder span.expand{margin-left:-7px}.signin .subcolumn02 .signin-area-bg .padder .input01{width:170px;border:1px #ccc solid;color:#868686;font-size:16px;padding:2px;-moz-border-radius:10px;-webkit-border-radius:10px;-khtml-border-radius:10px;-border-radius:10px;outline:0}.signin .subcolumn02 .signin-area-bg .padder .validate{color:#808080;margin:0}.valcode .pic{padding:5px 0 0 68px}.valcode .pic img{width:130px;height:53px}.signin .subcolumn03{clear:both}.strong-login .signin .subcolumn03{margin:10px 0}.signin .subcolumn03 .left{float:left}.signin .subcolumn03 .middle{float:left}.signin .subcolumn03 .middle .middle-padder{float:left;padding:15px 0 0 55px}.signin .subcolumn03 .middle .signin-btn{background:url("/style.ssl/5/images/login_btn.png") no-repeat -111px 0;width:111px;height:36px;border:0;text-align:center;line-height:20px;color:#0c4e7c;cursor:pointer;margin-left:14px}.signin .subcolumn03 .middle .signin2{float:left;margin-left:0}.signin .subcolumn03 .middle .signup-btn{background:url("/style.ssl/5/images/login_btn.png") no-repeat 0 0;width:111px;height:36px;display:block;border:0;text-align:center;line-height:20px;color:#0c4e7c;cursor:pointer;outline:0;float:left}.signin .subcolumn03 .right{float:left}.signin.yui-panel,.signin.yui-panel .hd,.signin.yui-panel .bd,.signin.yui-panel .ft{margin:0;padding:0;border:0;background:0}.signin.yui-panel .hd{font-weight:normal}.signin-area-bg .expand{display:block;width:16em;margin-left:55px}.middle-padder{width:280px}.middle-padder span{float:left}.valcode{padding:2px 0 0 0}.valcode a{color:#3472a3;text-decoration:underline}.valcode .expand{padding:10px 0;float:left}.bottom-padder{clear:both;text-align:center;padding:6px 0;width:356px}.bottom-padder a{color:#3472a3;margin:10px;text-decoration:underline}.verify_text{padding:3px 0 0 68px}.err_m{display:none;color:#f00}.signin-extend{margin:8px 0 0 58px}.webqq-checkbox{font-size:12px;line-height:2;float:left;margin-right:20px}.webqq-checkbox span{width:20px;height:20px;float:left;cursor:pointer;background:url("/style.ssl/5/images/ptlogin.gif") no-repeat scroll -40px -16px transparent}.webqq-checkbox .checked{background-position:-60px -16px}.login-state-trigger{cursor:pointer;display:block;float:left;height:16px;overflow:hidden;width:120px;margin:4px 0 0 0}.login-state-trigger2{margin:10px 0 0 20px}.login-state-down{background:url("/style.ssl/5/images/ptlogin.gif") no-repeat scroll 0 -22px transparent;float:left;height:6px;margin-top:5px;overflow:hidden;text-indent:-999em;width:7px}.login-state-show{float:left;height:14px;overflow:hidden;text-indent:-999em;width:14px;margin:1px 4px 0 0}.login-state-txt{float:left;margin-left:5px;>line-height:18px!important}.login-state .callme{background:url("/style.ssl/5/images/ptlogin.png") -72px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -72px 0 no-repeat}.login-state .online{background:url("/style.ssl/5/images/ptlogin.png") 0 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") 0 0 no-repeat}.login-state .away{background:url("/style.ssl/5/images/ptlogin.png") -18px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -18px 0 no-repeat}.login-state .busy{background:url("/style.ssl/5/images/ptlogin.png") -36px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -36px 0 no-repeat}.login-state .silent{background:url("/style.ssl/5/images/ptlogin.png") -108px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -108px 0 no-repeat}.login-state .hidden{background:url("/style.ssl/5/images/ptlogin.png") -54px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -54px 0 no-repeat}.statePanel{position:absolute;right:57px;top:20px;z-index:10;margin:0;border-width:1px;border-style:solid;border-color:#ccc #6a6a6a #666 #cdcdcd;padding:0;width:100px;height:133px;overflow:hidden;background:white;font-size:12px;line-height:1.5;display:none}.statePanel .statePanel_li{display:block;float:left;margin:0;padding:3px 0;width:100px;height:16px;line-height:16px;overflow:hidden;zoom:1;cursor:pointer}.stateSelect_icon{float:left;margin:2px 0 0 5px;width:14px;height:14px;overflow:hidden}.stateSelect_text{margin:0 0 0 22px}/*  |xGv00|fb946ec2618acf942efa73b6e9a628a6 */.main{background-color:#fff;}</style><script>//错误上报
(function(){
	window.onerror = function(msg,url,line){
		var reportUrl = location.protocol == "https:" ?
			'https://ssl.qq.com/ptlogin/cgi-bin/ptlogin_report?' :
			'http://log.wtlogin.qq.com/cgi-bin/ptlogin_report?';
		var t = document.createElement('img');
		var e_info=encodeURIComponent(msg+'|_|'+url+'|_|'+line+'|_|'+window.navigator.userAgent);
		t.src = reportUrl + 'id=195279&msg=' + e_info + '&v=' + Math.random();
	}
})();
////////////////////////////
var str_uintip = "QQ号码/手机/邮箱";
var str_passtip = "密码";
var str_codetip = "验证码";
var str_no_uin = "您还没有输入帐号！";
var str_no_pwd = "您还没有输入密码！";
var str_no_vcode = "您还没有输入验证码！";
var str_inv_uin = "请输入正确的QQ帐号！";
var str_inv_vcode = "请输入完整的验证码！";
var str_correct_vcode = "请输入正确的验证码！";
var str_net_error = "网络或服务器出错，请稍后再试！";
var str_input_error = "您的输入有误，请稍后重试！";
var str_switch_qlogin = "切换到快速登录模式";
var str_switch_normal = "使用其他号码登录";
var str_qlogin_no_uin = "系统检测到您机器上QQ未启动或已被锁定。请您先登录QQ或解锁后再使用本功能。";
var str_qlogin_other_err  = "快速登录失败，请您返回重试或切换到普通登录模式。";
var str_qlogin_select_offline = "您所选择号码对应的QQ已经失效，请检查该号码对应的QQ是否已经被关闭。";
var str_qlogining = "正在登录中，请稍候……";
var str_yjfk = "意见反馈";
//参数只能为数字的
var g_version=encodeURIComponent("201503020930");
var g_pt_version=encodeURIComponent("10114");//发布版本号
var g_qtarget=encodeURIComponent("-1");
var isLoadVC = false;
var g_appid =encodeURIComponent("1003903");
var g_uin = 0;
var g_domain = encodeURIComponent("qq.com");
var g_target = encodeURIComponent("_self");
var g_https = true;
var g_low_login=encodeURIComponent("0");
var g_login_sig=encodeURIComponent("hQpi1QWi8hZPHol9Waheu2oi5Bl-DsnR4MSipfdZMamV-64yzfVqeM*-fS69x3Ro"); //安全参数
var g_daid=encodeURIComponent("164");//业务隔离id
var g_regmaster=encodeURIComponent("");//双登录态
var g_forget="http://ptlogin2.qq.com/ptui_forgetpwd";

var g_href="https\x3A\x2F\x2Fui.ptlogin2.qq.com\x2Fcgi-bin\x2Flogin\x3Fdaid\x3D164\x26target\x3Dself\x26style\x3D5\x26mibao_css\x3Dm_webqq\x26appid\x3D1003903\x26enable_qlogin\x3D0\x26no_verifyimg\x3D1\x26s_url\x3Dhttp\x253A\x252F\x252Fweb2.qq.com\x252Floginproxy.html\x26f_url\x3Dloginerroralert\x26strong_login\x3D1\x26login_state\x3D10\x26t\x3D20130723001";
var g_param = "";
var g_css = encodeURIComponent("");
var g_ptcss = encodeURIComponent("");
var g_jumpname = encodeURIComponent("");
var g_mibao_css=encodeURIComponent("m_webqq");//密保页面css
var g_style=encodeURIComponent("5");//模版类型 (传到iframe参数)

if(g_style==5||g_style==16){
	//webqq 不降域
}else{
	document.domain="qq.com";	
}
var g_t="QQ号码/手机/邮箱";
var g_lang="2052";
str_uintip="QQ号码/手机/邮箱";



/***********************
 *
 *  file:preload.js
 *  intro: 只保留与普通登录页面渲染有关的js.
 *
 ***********************/
function $(id){return document.getElementById(id);}
var preload={
	needSize:"",
	isIpad:false,

	init:function(){
		var u = navigator.userAgent.toLowerCase();
		preload.isIpad = /ipad/i.test(u);
		preload.needSize = preload.getQuery("ptsize");
	},
	getQuery:function(n){
		var m = window.location.search.match(new RegExp( "(?:/?|&)"+n+"=([^&]*)(?:&|$)"));
		return !m ? "":unescape(m[1]);
	}
}
preload.init();
//阻止多次提交
var isAbleSubmit=false;

//通知父窗口跳转登录窗口的大小
//main_div_id为登录界面最上层div的ID，注意要设置属性，使得该div的大小就是文档的大小
function ptui_notifySize(main_div_id)
{
	try{
		obj = $(main_div_id)
		if (obj){
			width = 1;	//绝不为0
			height = 1;	//绝不为0
			if (obj.offsetWidth > 0) {
				width = obj.offsetWidth;
			}
			if (obj.offsetHeight > 0){
				height = obj.offsetHeight;
			}
			//避免降域
			var hostname = window.location.hostname.replace(/ui\.ptlogin2\./i,"");
			//alert(hostname);
			var expire = new Date();
			expire.setTime(expire.getTime() + 5*1000);
			if(preload.needSize){
				document.cookie="pt_size="+width+"-"+height+";domain="+hostname+";path=/;expires="+expire.toGMTString();
			}
			//https 跨域的时候采用postMessage 通知大小
			try{
				if(typeof window.postMessage!="undefined"){
					window.parent.postMessage("pt_size="+width+"-"+height,"*");
				}
			}catch(e){
			}
			if (parent.ptlogin2_onResize){
				parent.ptlogin2_onResize(width, height);
				//fix chrome height, by henryguo
				window.scroll(0,10);
			}else{
				frameElement.width = width;
				frameElement.style.width = width + "px";
				frameElement.height = height;
				frameElement.style.height = height + "px";
				frameElement.style.visibility = "hidden";
				frameElement.style.visibility = "visible";
			}
		}
	}catch(e){
	}
}
//时间统计

var g_time = {};//时间点统计,by bleanycao

var g_connectTime = 0;	//performance.timing.domainLookupStart or performance.timing.connectStart;
var g_responseStartTime = 0;	//performance.timing.responseStart;
var g_responseEndTime = 0;	//performance.timing.responseEnd;

(function(){
	try
	{
		if (performance.timing.connectStart && performance.timing.connectStart != 0)
			g_connectTime = performance.timing.connectStart;

		if (performance.timing.responseStart && performance.timing.responseStart != 0)
			g_responseStartTime = performance.timing.responseStart;

		if (performance.timing.responseEnd && performance.timing.responseEnd != 0)
			g_responseEndTime = performance.timing.responseEnd;
	}
	catch(e)
	{
		g_connectTime = 0;
		g_responseStartTime = 0;
		g_responseEndTime = 0;
	}
})();

g_time.time0 = g_connectTime;	// 业务侧请求登录框的时间
g_time.time1 = g_responseStartTime;	// 服务器开始应答
g_time.time2 = g_responseEndTime;	// 服务器应答完毕
g_time.time3 = g_begTime;		// 登录框开始加载的时间

var np_clock=0;
var nptxsso=null;//快速登录插件
var has_checkNPPlugin=false;

/**
 * [checkNPPlugin 检查np插件是否载入完成]
 * @return {[type]} [description]
 */
function checkNPPlugin(){
	var checkNum=10;
	np_clock=window.setInterval(function(){
		if(typeof nptxsso.InitPVANoST=="function"||checkNum==0){
			window.clearInterval(np_clock);
			if(typeof nptxsso.InitPVANoST=="function"){
				onSelectLoad();
				//console.log("延迟切换快速登录");
			}

		}else{
			checkNum--;
			//console.log(checkNum);
		}
	}, 200);
}
/*******************************
 *
 * 加载页面时，检测快速登录
 *
 *******************************/
function suportActive() {
	var ActiveObjectSuppot = true;
	try {
		if (window.ActiveXObject || window.ActiveXObject.prototype) {
			ActiveObjectSuppot = true;
		} else {
			ActiveObjectSuppot = false;
		}
	} catch (e) {
		ActiveObjectSuppot = false;
	}
	return ActiveObjectSuppot;
}
function ptui_check_qlogin(){
	try{
		g_time.time20 = new Date();
		var count = 0;
		if(suportActive()){//IE
			var q_hummerQtrl = new ActiveXObject("SSOAxCtrlForPTLogin.SSOForPTLogin2");
			var vInitData = q_hummerQtrl.CreateTXSSOData();
			q_hummerQtrl.InitSSOFPTCtrl(0, vInitData);
			var g_vOptData = q_hummerQtrl.CreateTXSSOData();
			var vResult = q_hummerQtrl.DoOperation(2, g_vOptData);
			var vAccountList = vResult.GetArray("PTALIST");
			count = vAccountList.GetSize();
		}else{//FF Chrome
			if(navigator.mimeTypes["application/nptxsso"]){
				if(!nptxsso){
					nptxsso = document.createElement("embed");
					nptxsso.type="application/nptxsso";
					nptxsso.style.width="0px";
					nptxsso.style.height="0px";
					document.body.appendChild(nptxsso);
				}
				if(typeof nptxsso.InitPVANoST !="function"){
					if(!has_checkNPPlugin){
						checkNPPlugin();
						has_checkNPPlugin=true;
					}

				}
				var ok = nptxsso.InitPVANoST();
				if(ok)
					count = nptxsso.GetPVACount();
			}
		}
		g_time.time21 = new Date();
	}catch(e){
		return 0;
	}
	return count;
}
var xuiFrame = false;
var curXui = false;
var reloadweb = false;
//新增快速登录兼容
//var q_status = 1;  //1=unknow,2-ok,3-error
var q_clock;
function qlogin_check(){
	q_clock = setInterval(checking_qstatus, 200);
	var num = 50;
	//cookie
	document.cookie = "ptui_qstatus=1;domain=ptlogin2."+g_domain+"path=/";

	function checking_qstatus(){
		if (num == 0){
			//检测数量到限制
			switchpage();
		}
		if (document.cookie.indexOf("ptui_qstatus=2")>-1){
			// 快速登录加载OK
			clearInterval(q_clock);

			if (!g_time.time23)
			{
				g_time.time23 = new Date();

				var params = {};
				params["5"] = g_time.time21 - g_time.time20;
				params["6"] = g_time.time23 - g_time.time22;

				if (typeof(ptui_speedReport) == "function")
					ptui_speedReport(params);
			}
		}
		if (document.cookie.indexOf("ptui_qstatus=3")>-1){
			clearInterval(q_clock);
			//失败,切换成普通登录
			switchpage();
		}
		num--;
	}
}

function loadxui(n){
	if (xuiFrame){
		$("qlogin").style.display = 'block';
		return;
	}else{
		//这里要考虑是否reload,uin list  mark
		//当jumpname不为空，且qtarget不为空要注意qtarget
		/**
		 * g_jumpname != ""
		 *		g_qtarget != -1
		 *		g_qtarget == -1	这种情况是不存在的，后台来控制，1314.qq.com
		 * g_jumpname == ""
		 *
		 */
		//快速登录跳转方式，这个参数估计是一个很古老的参数，帮助文档中并没有提到，后台查看代码可知：
		//qtarget="self"	0
		//qtarget="top"		1
		//qtarget="parent"	2
		//qtarget=""		-1

		var q_target = 1;
		if (g_jumpname!=""){
			if (g_qtarget!=-1){
				q_target = parseInt(g_qtarget);
			}
		}else{
			switch(g_target){
				case '_self':q_target = 0;break;//快速登录对应parent
				case '_top':q_target = 1;break;//快速登录对应top
				case '_parent':q_target = 2;break;//快速登录对应parent.parent
				default:q_target = 1;
			}
		}

		var param_default = (g_jumpname==''||g_jumpname=='jump')?encodeURIComponent("u1="+encodeURIComponent(document.forms[0].u1.value)):"";
		//var daid=preload.getQuery("daid");
		//var regmaster=preload.getQuery("regmaster");
		var daid=window.g_daid;
		var appid=window.g_appid;
		var regmaster=window.g_regmaster;
		var xui_url = (/^(https)+/g.test(window.location)?"https":"http")
			+ "://xui.ptlogin2." + g_domain+"/cgi-bin/"
			+ "q"+g_href.substring(g_href.indexOf("/cgi-bin/")+9,g_href.indexOf("?"))
			+ "?domain="+g_domain+"&lang="+g_lang+"&qtarget="+q_target
			+ "&jumpname=" + g_jumpname
			+ "&ptcss=" + g_ptcss
			+ "&param=" + encodeURIComponent((g_param?encodeURIComponent(g_param):param_default))
			+ "&css=" + g_css
			+ "&mibao_css=" + window.g_mibao_css
			+ "&low_login=" + window.g_low_login
			+ "&ptui_version="+window.g_pt_version
			+ "&appid="+appid
			+ (daid?"&daid="+daid:"")
			+ (regmaster?"&regmaster="+regmaster:"");

		var q_div = $("qlogin");
		var h = 156+28*((n>5?5:n)-1);
		if(preload.getQuery("low_login")==1){
			h+=20;
		}
		g_time.time22 = new Date();
		q_div.innerHTML = '<iframe id="xui" name="xui" allowtransparency="true" scrolling="no" frameborder="0" width="100%" height="'+h+'" src="'+xui_url+'">';

		q_div.style.display='block';
		$("web_login").style.display='none';
		curXui = true;
		xuiFrame = true;
		//检测是否快速登录异常
		qlogin_check();
	}
}

function switchpage(){
	var err_box = $("err_m");
	err_box?err_box.style.display="none":"";
	if (curXui){
		$('web_login').style.display = 'block';
		$('qlogin').style.display = 'none';
		$('switch').innerHTML = '<a style="cursor:pointer;" onclick="switchpage();">'+str_switch_qlogin+'</a>';
		ptui_notifySize("login");
		if(typeof(ptui_initFocus)!="undefined"){ptui_initFocus(document.forms[0]);}
		curXui = false;
		//取消 q_status .
		clearInterval(q_clock);
	}else{
		$("qlogin").style.display = 'block';
		$('web_login').style.display = 'none';
		$('switch').innerHTML = '<a style="cursor:pointer;" onclick="switchpage();">'+str_switch_normal+'</a>';
		curXui = true;
		//检测qstatus
		qlogin_check();

		ptui_notifySize("login");
	}
	$("err_m").style.display="none";
}

//用户帐号输入框获得焦点
function ptui_onUserFocus(id, color)
{
	if(preload.isIpad)
		return;
	var obj = $(id);
	if (str_uintip == obj.value )
	{
		obj.value="";
	}
	obj.style.color=color;
}

//用户帐号输入框失去焦点
function ptui_onUserBlue(id, color)
{
	if(preload.isIpad)
		return;
	var obj = $(id);
	if ( "" == obj.value )
	{
		obj.value=str_uintip;
		obj.style.color=color;
	}
}
/**
 * [pluginBegin 快速登录插件加载完成的时候执行的]
 * @return {[type]} [description]
 */
function pluginBegin(){

}
function loadweblogin(){
	if(typeof(ptui_setUinColor)=='undefined'){
		reloadweb = true;
		return;
	}
	ptui_setUinColor('u', '#000000', '#cccccc');
	$("loginform").verifycode.value="";
}
function onSelectLoad(){
	var uNum=0;
	if (document.cookie.toLowerCase().indexOf("pt_qlogincode=5")>-1||(window.location.href).toLowerCase().indexOf("enable_qlogin=0")>-1||window.template==6){uNum=0;}else{uNum = ptui_check_qlogin();}
	if (uNum > 0) {
		loadxui(uNum);
		$('label_unable_tips').innerHTML = '';
		$('switch').innerHTML = '<a style="cursor:pointer;" onclick="switchpage();">使用其他号码登录</a>';
		$('switch').style.display = 'block';
		return;
	}else{
		loadweblogin();
		$('label_unable_tips').innerHTML = '';
		$('switch').style.display = 'none';			
	}

	ptui_notifySize("login");	
}
function onPrePageLoad(){
	var login_form = $("loginform");
		
	$("login_button").disabled=false;
	ptui_setDefUin(login_form, "");
	g_time.time5=new Date();
	webLoginReport();	
	ptui_notifySize("login");
	if(!curXui){ptui_initFocus(login_form);}
}/*  |xGv00|dd346c62d208d63d1ef06b98119f73e5 */</script><!--[if !IE]>|xGv00|4e64b34868184b6172760a0f6b61a1a3<![endif]--><title>weblogin</title></head><body onload="onPageLoad()" onclick="onBodyClick()" class="strong-login"><div class="signin" id="login"><div id="qlogin" style="display:none"><div id="qlogin_select" style="display:none" class="list_name"><p id="qlogin_select_tip"></p><div id="list_uin" style="margin:0"></div><div style="padding-left:32px;padding-top:20px"><input type="button" id="loginbtn" value="" class="btn_select" onclick="onQloginSelect()"></div><div id="qlogin_loading" class="linemid"></div><br></div><div class="lineright"><a href="javascript:switchPage(true, true)" id="label_switch_normal">使用其他号码登录</a></div></div><form id="loginform" autocomplete="off" name="loginform" action="http://ptlogin2.qq.com/login" method="post" onsubmit="return onFormSubmit(this),!1" onreset="return onFormReset(loginform)" target="_self" style="margin:0"><div class="subcolumn01"></div><div class="subcolumn02"><div class="banner"></div><div class="signin-area"><div class="signin-area-bg"><div class="padder"><div id="err_m" class="err_m"></div><div class="sign-input"><span class="title account">帐　号：</span><span class="input"><input autocomplete="on" name="u" id="u" type="text" style="ime-mode:disabled" class="input01" tabindex="1" value="QQ号码或Email帐号" onfocus="&quot;QQ号码或Email帐号&quot;==value&&(value=&quot;&quot;)" onblur="&quot;&quot;==value&&(value=&quot;QQ号码或Email帐号&quot;)"></span></div><div class="sign-input"><span class="title password">密　码：</span><span class="input"><input name="p" id="p" maxlength="16" type="password" class="input01" tabindex="2" onfocus="check()"></span></div><div class="clearer"></div><div id="verifyinput" class="valcode" style="display:none"><div class="sign-input"><span class="title code">验证码：</span><span class="input"><input autocomplete="off" id="verifycode" name="verifycode" type="text" style="ime-mode:disabled" class="input01 validate" value="" tabindex="3" maxlength="5"></span></div><div class="verify_text" id="verifytip">输入下图中的字符，不区分大小写</div><div class="pic" id="verifyshow"><img id="imgVerify" width="130" height="53" onload="imgLoadReport()"> <a id="changeimg_link" href="javascript:ptui_changeImg('qq.com', 1002101, true);">换一张</a></div></div></div></div></div><div class="clearer"></div><div class="subcolumn03"><div class="left"><div class="middle"><div class="middle-padder"><div class="logins"><input type="hidden" name="webqq_type" value="10" id="webqq_type"> <input type="hidden" name="remember_uin" value="1" id="remember_uin"> <input type="hidden" name="login2qq" value="1" id="login2qq"> <input type="submit" class="signin-btn signin2" value="" tabindex="6" id="login_button"><div id="loginState" class="login-state-trigger login-state-trigger2 login-state" title="选择在线状态" onclick="return onLoginStateChanged(this,event),!1"><div id="loginStateShow" class="login-state-show online">状态</div><div class="login-state-down">下</div><div class="login-state-txt" id="login2qq_state_txt">在线</div></div></div></div></div><div class="right"></div><div class="clearer"></div></div></div></div><div class="lineright" id="label_unable_tips" style="display:none"><a href="javascript:onClickQLogin()" id="label_switch_qlogin" style="display:none"></a><span id="label_qlogin_tips" style="line-height:18px"></span></div><input type="hidden" name="aid" value="1003903" />
<input type="hidden" name="u1" value="http://web2.qq.com/loginproxy.html" />
<input type="hidden" name="fp" value="loginerroralert" />
<input type="hidden" name="h" value="1" />
<input type="hidden" name="ptredirect" value="0" />
<input type="hidden" name="ptlang" value="2052" />
<input type="hidden" name="daid" value="164" />
 <input type="hidden" name="from_ui" value="1"> <input type="hidden" name="pttype" value="1"> <input type="hidden" name="dumy" value=""></form></div><ul id="loginStatePanel" class="statePanel login-state" style="display:none"><li state="online" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(10)"><div class="stateSelect_icon online"></div><div class="stateSelect_text">我在线上</div></li><li state="callme" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(60)"><div class="stateSelect_icon callme"></div><div class="stateSelect_text">Q我吧</div></li><li state="away" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(30)"><div class="stateSelect_icon away"></div><div class="stateSelect_text">离开</div></li><li state="busy" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(50)"><div class="stateSelect_icon busy"></div><div class="stateSelect_text">忙碌</div></li><li state="silent" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(70)"><div class="stateSelect_icon silent"></div><div class="stateSelect_text">请勿打扰</div></li><li state="hidden" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(40)"><div class="stateSelect_icon hidden"></div><div class="stateSelect_text">隐身</div></li></ul></body><script>g_time.time4=new Date();
function onSelectLoad(){}
function onPrePageLoad()
{
	//10:'online',20:'offline',30:'away',40:'hidden',50:'busy',60:'callme',70:'silent'
	ptui_setDefUin(document.getElementById("loginform"), "");	
	var rememCookie = getRememCookie();
	var checkObj = document.getElementById("remember_uin");
	if ((rememCookie&0x04) == 0){
		checkObj.checked=true;
		onClickRemember(checkObj, 0x01, false);
	}
	rememCookie = getRememCookie();
	if ((rememCookie&0x01) != 0){
		checkObj.checked = true;
	}else {
		checkObj.checked = false;
	};
	var getQueryValue = function (url, key) {
	    var reg = new RegExp(
	                        "(^|&|\\?|#)" 
	                        + (key).replace(new RegExp("([.*+?^=!:\x24{}()|[\\]\/\\\\])", "g"), '\\\x241')
	                        + "=([^&]*)(&|\x24)", 
	                    "");
	    var match = url.match(reg);
	    if (match) {
	        return match[2];
	    }
	    
	    return null;
    };
    var login_state = getQueryValue(window.location.search,"login_state");
    if(login_state){
	    var dom = document.getElementById("loginStateShow");
		var input = document.getElementById("webqq_type");
		var txt = document.getElementById("login2qq_state_txt");
		dom.className = "login-state-show " + code2state(login_state);
		txt.innerHTML = code2text(login_state);
		input.value = login_state;
    }
	
	
	
	
	ptui_notifySize('login');
}
function getRememCookie(){
	var iCookieVal = 0;
	var cookieVal = pt.cookie.get("ptui_check_rem_uin");
	if (cookieVal!="" && cookieVal!=null){
		iCookieVal = parseInt(cookieVal);
	}
	return iCookieVal;
}
function setRememCookie(val)
{
	var mytime = new Date();
	mytime.setHours(mytime.getHours() + 24*30);	//配置只保持一个月有效
	pt.cookie.set('ptui_check_rem_uin', val, mytime, '/', 'ui.ptlogin2.qq.com');
}
function onClickRemember(obj,flag, bReverse){
	var iCookieVal = getRememCookie();
	var bSet = obj.checked;
	if (bReverse) bSet = !bSet;
	if (bSet) iCookieVal |= flag;else iCookieVal &= ~(flag);	
	iCookieVal|=4;	
	setRememCookie(iCookieVal);
	return true;
}
function onFormSubmit(form)
{
	if (form.remember_uin.checked){
		return ptui_onLoginEx(form, "qq.com")
	}else{				
		var myDate=new Date();
		myDate.setFullYear(1971,1,1);
		pt.cookie.set("ptui_loginuin",  "", myDate, '/', 'ui.ptlogin2.qq.com');
		return ptui_onLogin(form);
	}
}
function onPageLoad(){
	try{ptui_initFocus(document.getElementById("loginform"))}catch(e){}
	if(document.getElementById("u").value!="QQ号码或Email帐号" && document.getElementById("u").value!=""){
		if(document.getElementById("p").value==""){
			document.getElementById("p").focus();
		}else{
			if(vcode){
				vcode.focus();
			}else{
				document.getElementById("submitbtn").focus();
			}
		}
	}else{
		document.getElementById("u").focus();
	}
	g_time.time5=new Date();
	webLoginReport();
}
function getLogin2QQCookie(){
	var iCookieVal = 0;
	var cookieVal = pt.cookie.get("ptui_login_2_qq");
	if (cookieVal!="" && cookieVal!=null){
		iCookieVal = parseInt(cookieVal);
	}
	return iCookieVal;
}
function setLogin2QQCookie(val)
{
	var mytime = new Date();
	mytime.setHours(mytime.getHours() + 24*30);	//配置只保持一个月有效
	pt.cookie.set('ptui_login_2_qq', val, mytime, '/', 'ui.ptlogin2.qq.com');
}
function setLoginStateCookie(val)
{
	var mytime = new Date();
	mytime.setHours(mytime.getHours() + 24*30);	//配置只保持一个月有效
	pt.cookie.set('ptui_login_state', val, mytime, '/', 'ui.ptlogin2.qq.com');
}
function getLoginStateCookie(){
	var iCookieVal = 0;
	var cookieVal = pt.cookie.get("ptui_login_state");
	if (cookieVal!="" && cookieVal!=null){
		iCookieVal = parseInt(cookieVal);
	}
	return iCookieVal;
}
function code2state(code){
	var map = {10:'online',20:'offline',30:'away',40:'hidden',50:'busy',60:'callme',70:'silent'};
	return map[code] || 'online';
}
function code2text(code){
	var map = {10:'我在线上',20:'离线',30:'离开',40:'隐身',50:'忙碌',60:'Q我吧',70:'请勿打扰'};
	return map[code] || '我在线上';
}
function onClickLoginCheckBox(){
	var input = document.getElementById("login2qq");
	var checkbox = document.getElementById("login2qq_checkbox");
	if(input.value == 1){
		input.value = 0;	
		checkbox.className = "";
	}else{
		input.value = 1;
		checkbox.className = "checked";
	}
	setLogin2QQCookie(input.value);
}
function onLoginStateChanged(trigger, event){
    var getScrollLeft = function(el) {
    	var scrollLeft;
    	if(el){
    		scrollLeft = el.scrollLeft;
    	}else{
    		scrollLeft = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);
    	}
        return scrollLeft || 0;
    };
    var getScrollTop = function(el) {
        var scrollTop;
    	if(el){
    		scrollTop = el.scrollTop;
    	}else{
    		scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);
    	}
        return scrollTop || 0;
    };
	var getClientXY = function(el) {
		var _t = 0,
			_l = 0;
		var isIE = !-[1,];
		if (el) {
			//这里只检查document不够严谨, 在el被侵染置换(jQuery做了这么恶心的事情)
			//的情况下, el.getBoundingClientRect() 调用回挂掉
			if (document.documentElement.getBoundingClientRect && el.getBoundingClientRect) { // 顶IE的这个属性，获取对象到可视范围的距离。
				//现在firefox3，chrome2，opera9.63都支持这个属性。
				var box = {left:0,top:0,right:0,bottom:0};//
				try{
					box=el.getBoundingClientRect();
				}catch(ex){
					return [0,0];
				}
				var oDoc = el.ownerDocument;
				
				var _fix = isIE ? 2 : 0; //修正ie和firefox之间的2像素差异
				
				_t = box.top - _fix + getScrollTop(oDoc);
				_l = box.left - _fix + getScrollLeft(oDoc);
			} else {//这里只有safari执行。
				while (el.offsetParent) {
					_t += el.offsetTop;
					_l += el.offsetLeft;
					el = el.offsetParent;
				}
			}
		}
		return [_l, _t];
	};
	
	var panel = document.getElementById("loginStatePanel");
	if(panel.style.display === "none"){
		var xy = getClientXY(trigger);
		panel.style.left = xy[0] + "px";
		panel.style.top = (xy[1] - 135) + "px";
		panel.style.display = "block";
	}else{
		panel.style.display = "none";
	}
	stopPropagation(event);
}
function onBodyClick(){
	var panel = document.getElementById("loginStatePanel");
	panel.style.display = "none";
	typeof pt != "undefined"?pt.action[0]++:"";
}
function stopPropagation(evt){
	var e=(evt)?evt:window.event; 
	if (window.event) { 
		e.cancelBubble=true; 
	} else { 
		e.stopPropagation(); 
	} 
}
function onStateItemMouseOver(trigger){
	trigger.style.backgroundColor = "#cbe7fc";
}
function onStateItemMouseOut(trigger){
	trigger.style.backgroundColor = "transparent";
}
function onStateItemClick(state){
	var dom = document.getElementById("loginStateShow");
	var input = document.getElementById("webqq_type");
	var txt = document.getElementById("login2qq_state_txt");
	dom.className = "login-state-show " + code2state(state);
	input.value = state;
	txt.innerHTML = code2text(state);
	//setLoginStateCookie(state);
}
document.getElementById("login_button").value="";</script><script>onSelectLoad();</script><script src="../js/10114/comm.js?ptui_identifier=000D92516C912645522DD7EABC2A4481AEF3DC11325701D58410E38C"></script><script>function cleanCache(e){var t=document.createElement("iframe");3==e.split("#").length&&(e=e.substring(0,e.lastIndexOf("#"))),t.src=e,t.style.display="none",document.body.appendChild(t)}function loadScript(e,t){var n=document.createElement("script");n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||("function"==typeof t&&t(),n.onload=n.onreadystatechange=null)},n.onerror=function(){n.onerror=null,t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}function onPageClose(){ptui_notifyClose()}function ptuiV(e){e!=window.g_pt_version&&cleanCache("/clearcache.html#"+location.href)}function checkVersion(){var e=document.createElement("script");e.src="/ptui_ver.js?ptui_identifier=000D92516C912645522DD7EABC2A4414CA305374A941576A900E696A&v="+Math.random(),document.body.appendChild(e)}if("undefined"==typeof ptuiCB){var imgAttr2=new Image;imgAttr2.src=location.protocol+"//ui.ptlogin2.qq.com/cgi-bin/report?id=85289&union=256039";var serverJsPath="../js/"+window.g_pt_version+"/comm.js?max_age=604800&ptui_identifier=000D92516C912645522DD7EABC2A4481AEF3DC11325701D58410E38C";loadScript(serverJsPath,function(){if("undefined"==typeof ptuiCB){var e=document.getElementById("login_button");e&&(e.disabled=!0),imgAttr2.src=location.protocol+"//ui.ptlogin2.qq.com/cgi-bin/report?id=299500"}})}onPrePageLoad(),reloadweb&&loadweblogin(),setTimeout(checkVersion,1500);</script><!--[if !IE]>|xGv00|d3182670b6fd0b656fc489a934e7bd97<![endif]--></html><!--[if !IE]>|xGv00|e9cde27202fb74987f368b1bbba8a2f5<![endif]-->
[11:33:14.983][INFO][GetLoginSigAction:74] loginSig = hQpi1QWi8hZPHol9Waheu2oi5Bl-DsnR4MSipfdZMamV-64yzfVqeM*-fS69x3Ro
[11:33:16.364][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=confirmuin, value=0, domain=ptlogin2.qq.com, path=/, expired=null]
[11:33:16.365][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptvfsession, value=dc906f47ee83f0760f6190a9368da6d91ba020a03d6bf0fe06fa473742d1b35feb9eea4abae722cf33c76ab76c48805f, domain=ptlogin2.qq.com, path=/, expired=null]
[11:33:16.366][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptisp, value=ctc, domain=qq.com, path=/, expired=null]
[11:33:16.368][DEBUG][CheckVerifyAction:80] application/x-javascript; charset=utf-8
[11:33:17.293][DEBUG][WebLoginAction:80] application/x-javascript; charset=utf-8
[11:33:17.294][INFO][WebLoginAction:159] WebLogin: ptuiCB('7','0','','0','提交参数错误，请检查。(3327131865)', '1002053815');

[11:33:20.891][DEBUG][ThreadActorDispatcher:94] QQActorDispatcher leave action loop...
[11:34:09.910][DEBUG][ThreadActorDispatcher:92] QQActorDispatcher enter action loop...
[11:34:09.913][DEBUG][ThreadMsgDispatcher:108] QQActorDispatcher enter action loop...
[11:34:16.296][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=login_param, value=daid%3D164%26target%3Dself%26style%3D5%26mibao_css%3Dm_webqq%26appid%3D1003903%26enable_qlogin%3D0%26no_verifyimg%3D1%26s_url%3Dhttp%253A%252F%252Fweb2.qq.com%252Floginproxy.html%26f_url%3Dloginerroralert%26strong_login%3D1%26login_state%3D10%26t%3D20130723001, domain=ui.ptlogin2.qq.com, path=/, expired=null]
[11:34:16.296][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=uikey, value=e391ec085fc257c6ebb7d1bf343e378206b7c361475f363b66f18adaea6ee4c7, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:16.297][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=pt_user_id, value=8893009546751110202, domain=ui.ptlogin2.qq.com, path=/, expired=null]
[11:34:16.297][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptui_identifier, value=000DCCC155DB9574F3B2F564741BB31D371A29C55EB0904A2B341A6C, domain=ui.ptlogin2.qq.com, path=/, expired=null]
[11:34:16.907][DEBUG][GetLoginSigAction:80] text/html
[11:34:16.908][DEBUG][GetLoginSigAction:90] <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"><script>var g_begTime=new Date;</script><style type="text/css">u{text-decoration:none;white-space:nowrap}*{font-family:Tahoma,Verdana,Arial,Helvetica,sans-serif;font-size:12px}body{margin:0;padding:0;background:#f6f6f6}form{margin:0;padding:0}img{border:0 none}a{text-decoration:none}em{font-style:normal}.clearer{clear:both;display:block;font-size:1px;height:1px;margin:0;padding:0}.signin{width:360px;margin:0 auto;float:none;padding:0}.signin .subcolumn01 .middle{float:left;width:296px;height:40px}.signin .subcolumn01 .middle span{line-height:40px;color:#000;font-weight:bold;font-size:14px;padding-left:4em}.signin .subcolumn02{width:356px;overflow:hidden;zoom:1;padding-bottom:10px}.strong-login .signin .subcolumn02{padding-top:20px}.signin .subcolumn02 .signin-area{padding:1px 17px;margin:0 0 0 40px}.signin .subcolumn02 .signin-area-bg{float:left;width:296px}.signin .subcolumn02 .signin-area-bg .padder{margin:8px 0 0}.signin .subcolumn02 .signin-area-bg .padder .sign-input{margin:14px 0 0 0}.signin .subcolumn02 .signin-area-bg .padder span.title{width:60px;height:20px;margin-right:5px;_margin-top:2px;text-indent:-999em;float:left;background:url("/style.ssl/5/images/login_btn.png") no-repeat}.signin .subcolumn02 .signin-area-bg .padder span.account{background-position:0 -36px}.signin .subcolumn02 .signin-area-bg .padder span.password{background-position:-60px -36px}.signin .subcolumn02 .signin-area-bg .padder span.code{background-position:-120px -36px}.signin .subcolumn02 .signin-area-bg .padder span.input{display:block}.signin .subcolumn02 .signin-area-bg .padder span.input a{margin-left:7px;text-decoration:underline;color:#3472a3}.signin .subcolumn02 .signin-area-bg .padder span.expand{padding-left:5.9em;-moz-user-select:none;-khtml-user-select:none;width:200px}*:lang(en) .signin .subcolumn02 .signin-area-bg .padder span.expand{margin-left:-7px}.signin .subcolumn02 .signin-area-bg .padder .input01{width:170px;border:1px #ccc solid;color:#868686;font-size:16px;padding:2px;-moz-border-radius:10px;-webkit-border-radius:10px;-khtml-border-radius:10px;-border-radius:10px;outline:0}.signin .subcolumn02 .signin-area-bg .padder .validate{color:#808080;margin:0}.valcode .pic{padding:5px 0 0 68px}.valcode .pic img{width:130px;height:53px}.signin .subcolumn03{clear:both}.strong-login .signin .subcolumn03{margin:10px 0}.signin .subcolumn03 .left{float:left}.signin .subcolumn03 .middle{float:left}.signin .subcolumn03 .middle .middle-padder{float:left;padding:15px 0 0 55px}.signin .subcolumn03 .middle .signin-btn{background:url("/style.ssl/5/images/login_btn.png") no-repeat -111px 0;width:111px;height:36px;border:0;text-align:center;line-height:20px;color:#0c4e7c;cursor:pointer;margin-left:14px}.signin .subcolumn03 .middle .signin2{float:left;margin-left:0}.signin .subcolumn03 .middle .signup-btn{background:url("/style.ssl/5/images/login_btn.png") no-repeat 0 0;width:111px;height:36px;display:block;border:0;text-align:center;line-height:20px;color:#0c4e7c;cursor:pointer;outline:0;float:left}.signin .subcolumn03 .right{float:left}.signin.yui-panel,.signin.yui-panel .hd,.signin.yui-panel .bd,.signin.yui-panel .ft{margin:0;padding:0;border:0;background:0}.signin.yui-panel .hd{font-weight:normal}.signin-area-bg .expand{display:block;width:16em;margin-left:55px}.middle-padder{width:280px}.middle-padder span{float:left}.valcode{padding:2px 0 0 0}.valcode a{color:#3472a3;text-decoration:underline}.valcode .expand{padding:10px 0;float:left}.bottom-padder{clear:both;text-align:center;padding:6px 0;width:356px}.bottom-padder a{color:#3472a3;margin:10px;text-decoration:underline}.verify_text{padding:3px 0 0 68px}.err_m{display:none;color:#f00}.signin-extend{margin:8px 0 0 58px}.webqq-checkbox{font-size:12px;line-height:2;float:left;margin-right:20px}.webqq-checkbox span{width:20px;height:20px;float:left;cursor:pointer;background:url("/style.ssl/5/images/ptlogin.gif") no-repeat scroll -40px -16px transparent}.webqq-checkbox .checked{background-position:-60px -16px}.login-state-trigger{cursor:pointer;display:block;float:left;height:16px;overflow:hidden;width:120px;margin:4px 0 0 0}.login-state-trigger2{margin:10px 0 0 20px}.login-state-down{background:url("/style.ssl/5/images/ptlogin.gif") no-repeat scroll 0 -22px transparent;float:left;height:6px;margin-top:5px;overflow:hidden;text-indent:-999em;width:7px}.login-state-show{float:left;height:14px;overflow:hidden;text-indent:-999em;width:14px;margin:1px 4px 0 0}.login-state-txt{float:left;margin-left:5px;>line-height:18px!important}.login-state .callme{background:url("/style.ssl/5/images/ptlogin.png") -72px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -72px 0 no-repeat}.login-state .online{background:url("/style.ssl/5/images/ptlogin.png") 0 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") 0 0 no-repeat}.login-state .away{background:url("/style.ssl/5/images/ptlogin.png") -18px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -18px 0 no-repeat}.login-state .busy{background:url("/style.ssl/5/images/ptlogin.png") -36px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -36px 0 no-repeat}.login-state .silent{background:url("/style.ssl/5/images/ptlogin.png") -108px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -108px 0 no-repeat}.login-state .hidden{background:url("/style.ssl/5/images/ptlogin.png") -54px 0 no-repeat;_background:url("/style.ssl/5/images/ptlogin.gif") -54px 0 no-repeat}.statePanel{position:absolute;right:57px;top:20px;z-index:10;margin:0;border-width:1px;border-style:solid;border-color:#ccc #6a6a6a #666 #cdcdcd;padding:0;width:100px;height:133px;overflow:hidden;background:white;font-size:12px;line-height:1.5;display:none}.statePanel .statePanel_li{display:block;float:left;margin:0;padding:3px 0;width:100px;height:16px;line-height:16px;overflow:hidden;zoom:1;cursor:pointer}.stateSelect_icon{float:left;margin:2px 0 0 5px;width:14px;height:14px;overflow:hidden}.stateSelect_text{margin:0 0 0 22px}/*  |xGv00|fb946ec2618acf942efa73b6e9a628a6 */.main{background-color:#fff;}</style><script>//错误上报
(function(){
	window.onerror = function(msg,url,line){
		var reportUrl = location.protocol == "https:" ?
			'https://ssl.qq.com/ptlogin/cgi-bin/ptlogin_report?' :
			'http://log.wtlogin.qq.com/cgi-bin/ptlogin_report?';
		var t = document.createElement('img');
		var e_info=encodeURIComponent(msg+'|_|'+url+'|_|'+line+'|_|'+window.navigator.userAgent);
		t.src = reportUrl + 'id=195279&msg=' + e_info + '&v=' + Math.random();
	}
})();
////////////////////////////
var str_uintip = "QQ号码/手机/邮箱";
var str_passtip = "密码";
var str_codetip = "验证码";
var str_no_uin = "您还没有输入帐号！";
var str_no_pwd = "您还没有输入密码！";
var str_no_vcode = "您还没有输入验证码！";
var str_inv_uin = "请输入正确的QQ帐号！";
var str_inv_vcode = "请输入完整的验证码！";
var str_correct_vcode = "请输入正确的验证码！";
var str_net_error = "网络或服务器出错，请稍后再试！";
var str_input_error = "您的输入有误，请稍后重试！";
var str_switch_qlogin = "切换到快速登录模式";
var str_switch_normal = "使用其他号码登录";
var str_qlogin_no_uin = "系统检测到您机器上QQ未启动或已被锁定。请您先登录QQ或解锁后再使用本功能。";
var str_qlogin_other_err  = "快速登录失败，请您返回重试或切换到普通登录模式。";
var str_qlogin_select_offline = "您所选择号码对应的QQ已经失效，请检查该号码对应的QQ是否已经被关闭。";
var str_qlogining = "正在登录中，请稍候……";
var str_yjfk = "意见反馈";
//参数只能为数字的
var g_version=encodeURIComponent("201503020930");
var g_pt_version=encodeURIComponent("10114");//发布版本号
var g_qtarget=encodeURIComponent("-1");
var isLoadVC = false;
var g_appid =encodeURIComponent("1003903");
var g_uin = 0;
var g_domain = encodeURIComponent("qq.com");
var g_target = encodeURIComponent("_self");
var g_https = true;
var g_low_login=encodeURIComponent("0");
var g_login_sig=encodeURIComponent("ZiQCTbNekLX2HeVCTu2ux7sgrm*RphF2ySITSt-hc7JJLFTxRcVZkkyN3*IuV5rA"); //安全参数
var g_daid=encodeURIComponent("164");//业务隔离id
var g_regmaster=encodeURIComponent("");//双登录态
var g_forget="http://ptlogin2.qq.com/ptui_forgetpwd";

var g_href="https\x3A\x2F\x2Fui.ptlogin2.qq.com\x2Fcgi-bin\x2Flogin\x3Fdaid\x3D164\x26target\x3Dself\x26style\x3D5\x26mibao_css\x3Dm_webqq\x26appid\x3D1003903\x26enable_qlogin\x3D0\x26no_verifyimg\x3D1\x26s_url\x3Dhttp\x253A\x252F\x252Fweb2.qq.com\x252Floginproxy.html\x26f_url\x3Dloginerroralert\x26strong_login\x3D1\x26login_state\x3D10\x26t\x3D20130723001";
var g_param = "";
var g_css = encodeURIComponent("");
var g_ptcss = encodeURIComponent("");
var g_jumpname = encodeURIComponent("");
var g_mibao_css=encodeURIComponent("m_webqq");//密保页面css
var g_style=encodeURIComponent("5");//模版类型 (传到iframe参数)

if(g_style==5||g_style==16){
	//webqq 不降域
}else{
	document.domain="qq.com";	
}
var g_t="QQ号码/手机/邮箱";
var g_lang="2052";
str_uintip="QQ号码/手机/邮箱";



/***********************
 *
 *  file:preload.js
 *  intro: 只保留与普通登录页面渲染有关的js.
 *
 ***********************/
function $(id){return document.getElementById(id);}
var preload={
	needSize:"",
	isIpad:false,

	init:function(){
		var u = navigator.userAgent.toLowerCase();
		preload.isIpad = /ipad/i.test(u);
		preload.needSize = preload.getQuery("ptsize");
	},
	getQuery:function(n){
		var m = window.location.search.match(new RegExp( "(?:/?|&)"+n+"=([^&]*)(?:&|$)"));
		return !m ? "":unescape(m[1]);
	}
}
preload.init();
//阻止多次提交
var isAbleSubmit=false;

//通知父窗口跳转登录窗口的大小
//main_div_id为登录界面最上层div的ID，注意要设置属性，使得该div的大小就是文档的大小
function ptui_notifySize(main_div_id)
{
	try{
		obj = $(main_div_id)
		if (obj){
			width = 1;	//绝不为0
			height = 1;	//绝不为0
			if (obj.offsetWidth > 0) {
				width = obj.offsetWidth;
			}
			if (obj.offsetHeight > 0){
				height = obj.offsetHeight;
			}
			//避免降域
			var hostname = window.location.hostname.replace(/ui\.ptlogin2\./i,"");
			//alert(hostname);
			var expire = new Date();
			expire.setTime(expire.getTime() + 5*1000);
			if(preload.needSize){
				document.cookie="pt_size="+width+"-"+height+";domain="+hostname+";path=/;expires="+expire.toGMTString();
			}
			//https 跨域的时候采用postMessage 通知大小
			try{
				if(typeof window.postMessage!="undefined"){
					window.parent.postMessage("pt_size="+width+"-"+height,"*");
				}
			}catch(e){
			}
			if (parent.ptlogin2_onResize){
				parent.ptlogin2_onResize(width, height);
				//fix chrome height, by henryguo
				window.scroll(0,10);
			}else{
				frameElement.width = width;
				frameElement.style.width = width + "px";
				frameElement.height = height;
				frameElement.style.height = height + "px";
				frameElement.style.visibility = "hidden";
				frameElement.style.visibility = "visible";
			}
		}
	}catch(e){
	}
}
//时间统计

var g_time = {};//时间点统计,by bleanycao

var g_connectTime = 0;	//performance.timing.domainLookupStart or performance.timing.connectStart;
var g_responseStartTime = 0;	//performance.timing.responseStart;
var g_responseEndTime = 0;	//performance.timing.responseEnd;

(function(){
	try
	{
		if (performance.timing.connectStart && performance.timing.connectStart != 0)
			g_connectTime = performance.timing.connectStart;

		if (performance.timing.responseStart && performance.timing.responseStart != 0)
			g_responseStartTime = performance.timing.responseStart;

		if (performance.timing.responseEnd && performance.timing.responseEnd != 0)
			g_responseEndTime = performance.timing.responseEnd;
	}
	catch(e)
	{
		g_connectTime = 0;
		g_responseStartTime = 0;
		g_responseEndTime = 0;
	}
})();

g_time.time0 = g_connectTime;	// 业务侧请求登录框的时间
g_time.time1 = g_responseStartTime;	// 服务器开始应答
g_time.time2 = g_responseEndTime;	// 服务器应答完毕
g_time.time3 = g_begTime;		// 登录框开始加载的时间

var np_clock=0;
var nptxsso=null;//快速登录插件
var has_checkNPPlugin=false;

/**
 * [checkNPPlugin 检查np插件是否载入完成]
 * @return {[type]} [description]
 */
function checkNPPlugin(){
	var checkNum=10;
	np_clock=window.setInterval(function(){
		if(typeof nptxsso.InitPVANoST=="function"||checkNum==0){
			window.clearInterval(np_clock);
			if(typeof nptxsso.InitPVANoST=="function"){
				onSelectLoad();
				//console.log("延迟切换快速登录");
			}

		}else{
			checkNum--;
			//console.log(checkNum);
		}
	}, 200);
}
/*******************************
 *
 * 加载页面时，检测快速登录
 *
 *******************************/
function suportActive() {
	var ActiveObjectSuppot = true;
	try {
		if (window.ActiveXObject || window.ActiveXObject.prototype) {
			ActiveObjectSuppot = true;
		} else {
			ActiveObjectSuppot = false;
		}
	} catch (e) {
		ActiveObjectSuppot = false;
	}
	return ActiveObjectSuppot;
}
function ptui_check_qlogin(){
	try{
		g_time.time20 = new Date();
		var count = 0;
		if(suportActive()){//IE
			var q_hummerQtrl = new ActiveXObject("SSOAxCtrlForPTLogin.SSOForPTLogin2");
			var vInitData = q_hummerQtrl.CreateTXSSOData();
			q_hummerQtrl.InitSSOFPTCtrl(0, vInitData);
			var g_vOptData = q_hummerQtrl.CreateTXSSOData();
			var vResult = q_hummerQtrl.DoOperation(2, g_vOptData);
			var vAccountList = vResult.GetArray("PTALIST");
			count = vAccountList.GetSize();
		}else{//FF Chrome
			if(navigator.mimeTypes["application/nptxsso"]){
				if(!nptxsso){
					nptxsso = document.createElement("embed");
					nptxsso.type="application/nptxsso";
					nptxsso.style.width="0px";
					nptxsso.style.height="0px";
					document.body.appendChild(nptxsso);
				}
				if(typeof nptxsso.InitPVANoST !="function"){
					if(!has_checkNPPlugin){
						checkNPPlugin();
						has_checkNPPlugin=true;
					}

				}
				var ok = nptxsso.InitPVANoST();
				if(ok)
					count = nptxsso.GetPVACount();
			}
		}
		g_time.time21 = new Date();
	}catch(e){
		return 0;
	}
	return count;
}
var xuiFrame = false;
var curXui = false;
var reloadweb = false;
//新增快速登录兼容
//var q_status = 1;  //1=unknow,2-ok,3-error
var q_clock;
function qlogin_check(){
	q_clock = setInterval(checking_qstatus, 200);
	var num = 50;
	//cookie
	document.cookie = "ptui_qstatus=1;domain=ptlogin2."+g_domain+"path=/";

	function checking_qstatus(){
		if (num == 0){
			//检测数量到限制
			switchpage();
		}
		if (document.cookie.indexOf("ptui_qstatus=2")>-1){
			// 快速登录加载OK
			clearInterval(q_clock);

			if (!g_time.time23)
			{
				g_time.time23 = new Date();

				var params = {};
				params["5"] = g_time.time21 - g_time.time20;
				params["6"] = g_time.time23 - g_time.time22;

				if (typeof(ptui_speedReport) == "function")
					ptui_speedReport(params);
			}
		}
		if (document.cookie.indexOf("ptui_qstatus=3")>-1){
			clearInterval(q_clock);
			//失败,切换成普通登录
			switchpage();
		}
		num--;
	}
}

function loadxui(n){
	if (xuiFrame){
		$("qlogin").style.display = 'block';
		return;
	}else{
		//这里要考虑是否reload,uin list  mark
		//当jumpname不为空，且qtarget不为空要注意qtarget
		/**
		 * g_jumpname != ""
		 *		g_qtarget != -1
		 *		g_qtarget == -1	这种情况是不存在的，后台来控制，1314.qq.com
		 * g_jumpname == ""
		 *
		 */
		//快速登录跳转方式，这个参数估计是一个很古老的参数，帮助文档中并没有提到，后台查看代码可知：
		//qtarget="self"	0
		//qtarget="top"		1
		//qtarget="parent"	2
		//qtarget=""		-1

		var q_target = 1;
		if (g_jumpname!=""){
			if (g_qtarget!=-1){
				q_target = parseInt(g_qtarget);
			}
		}else{
			switch(g_target){
				case '_self':q_target = 0;break;//快速登录对应parent
				case '_top':q_target = 1;break;//快速登录对应top
				case '_parent':q_target = 2;break;//快速登录对应parent.parent
				default:q_target = 1;
			}
		}

		var param_default = (g_jumpname==''||g_jumpname=='jump')?encodeURIComponent("u1="+encodeURIComponent(document.forms[0].u1.value)):"";
		//var daid=preload.getQuery("daid");
		//var regmaster=preload.getQuery("regmaster");
		var daid=window.g_daid;
		var appid=window.g_appid;
		var regmaster=window.g_regmaster;
		var xui_url = (/^(https)+/g.test(window.location)?"https":"http")
			+ "://xui.ptlogin2." + g_domain+"/cgi-bin/"
			+ "q"+g_href.substring(g_href.indexOf("/cgi-bin/")+9,g_href.indexOf("?"))
			+ "?domain="+g_domain+"&lang="+g_lang+"&qtarget="+q_target
			+ "&jumpname=" + g_jumpname
			+ "&ptcss=" + g_ptcss
			+ "&param=" + encodeURIComponent((g_param?encodeURIComponent(g_param):param_default))
			+ "&css=" + g_css
			+ "&mibao_css=" + window.g_mibao_css
			+ "&low_login=" + window.g_low_login
			+ "&ptui_version="+window.g_pt_version
			+ "&appid="+appid
			+ (daid?"&daid="+daid:"")
			+ (regmaster?"&regmaster="+regmaster:"");

		var q_div = $("qlogin");
		var h = 156+28*((n>5?5:n)-1);
		if(preload.getQuery("low_login")==1){
			h+=20;
		}
		g_time.time22 = new Date();
		q_div.innerHTML = '<iframe id="xui" name="xui" allowtransparency="true" scrolling="no" frameborder="0" width="100%" height="'+h+'" src="'+xui_url+'">';

		q_div.style.display='block';
		$("web_login").style.display='none';
		curXui = true;
		xuiFrame = true;
		//检测是否快速登录异常
		qlogin_check();
	}
}

function switchpage(){
	var err_box = $("err_m");
	err_box?err_box.style.display="none":"";
	if (curXui){
		$('web_login').style.display = 'block';
		$('qlogin').style.display = 'none';
		$('switch').innerHTML = '<a style="cursor:pointer;" onclick="switchpage();">'+str_switch_qlogin+'</a>';
		ptui_notifySize("login");
		if(typeof(ptui_initFocus)!="undefined"){ptui_initFocus(document.forms[0]);}
		curXui = false;
		//取消 q_status .
		clearInterval(q_clock);
	}else{
		$("qlogin").style.display = 'block';
		$('web_login').style.display = 'none';
		$('switch').innerHTML = '<a style="cursor:pointer;" onclick="switchpage();">'+str_switch_normal+'</a>';
		curXui = true;
		//检测qstatus
		qlogin_check();

		ptui_notifySize("login");
	}
	$("err_m").style.display="none";
}

//用户帐号输入框获得焦点
function ptui_onUserFocus(id, color)
{
	if(preload.isIpad)
		return;
	var obj = $(id);
	if (str_uintip == obj.value )
	{
		obj.value="";
	}
	obj.style.color=color;
}

//用户帐号输入框失去焦点
function ptui_onUserBlue(id, color)
{
	if(preload.isIpad)
		return;
	var obj = $(id);
	if ( "" == obj.value )
	{
		obj.value=str_uintip;
		obj.style.color=color;
	}
}
/**
 * [pluginBegin 快速登录插件加载完成的时候执行的]
 * @return {[type]} [description]
 */
function pluginBegin(){

}
function loadweblogin(){
	if(typeof(ptui_setUinColor)=='undefined'){
		reloadweb = true;
		return;
	}
	ptui_setUinColor('u', '#000000', '#cccccc');
	$("loginform").verifycode.value="";
}
function onSelectLoad(){
	var uNum=0;
	if (document.cookie.toLowerCase().indexOf("pt_qlogincode=5")>-1||(window.location.href).toLowerCase().indexOf("enable_qlogin=0")>-1||window.template==6){uNum=0;}else{uNum = ptui_check_qlogin();}
	if (uNum > 0) {
		loadxui(uNum);
		$('label_unable_tips').innerHTML = '';
		$('switch').innerHTML = '<a style="cursor:pointer;" onclick="switchpage();">使用其他号码登录</a>';
		$('switch').style.display = 'block';
		return;
	}else{
		loadweblogin();
		$('label_unable_tips').innerHTML = '';
		$('switch').style.display = 'none';			
	}

	ptui_notifySize("login");	
}
function onPrePageLoad(){
	var login_form = $("loginform");
		
	$("login_button").disabled=false;
	ptui_setDefUin(login_form, "");
	g_time.time5=new Date();
	webLoginReport();	
	ptui_notifySize("login");
	if(!curXui){ptui_initFocus(login_form);}
}/*  |xGv00|dd346c62d208d63d1ef06b98119f73e5 */</script><!--[if !IE]>|xGv00|4e64b34868184b6172760a0f6b61a1a3<![endif]--><title>weblogin</title></head><body onload="onPageLoad()" onclick="onBodyClick()" class="strong-login"><div class="signin" id="login"><div id="qlogin" style="display:none"><div id="qlogin_select" style="display:none" class="list_name"><p id="qlogin_select_tip"></p><div id="list_uin" style="margin:0"></div><div style="padding-left:32px;padding-top:20px"><input type="button" id="loginbtn" value="" class="btn_select" onclick="onQloginSelect()"></div><div id="qlogin_loading" class="linemid"></div><br></div><div class="lineright"><a href="javascript:switchPage(true, true)" id="label_switch_normal">使用其他号码登录</a></div></div><form id="loginform" autocomplete="off" name="loginform" action="http://ptlogin2.qq.com/login" method="post" onsubmit="return onFormSubmit(this),!1" onreset="return onFormReset(loginform)" target="_self" style="margin:0"><div class="subcolumn01"></div><div class="subcolumn02"><div class="banner"></div><div class="signin-area"><div class="signin-area-bg"><div class="padder"><div id="err_m" class="err_m"></div><div class="sign-input"><span class="title account">帐　号：</span><span class="input"><input autocomplete="on" name="u" id="u" type="text" style="ime-mode:disabled" class="input01" tabindex="1" value="QQ号码或Email帐号" onfocus="&quot;QQ号码或Email帐号&quot;==value&&(value=&quot;&quot;)" onblur="&quot;&quot;==value&&(value=&quot;QQ号码或Email帐号&quot;)"></span></div><div class="sign-input"><span class="title password">密　码：</span><span class="input"><input name="p" id="p" maxlength="16" type="password" class="input01" tabindex="2" onfocus="check()"></span></div><div class="clearer"></div><div id="verifyinput" class="valcode" style="display:none"><div class="sign-input"><span class="title code">验证码：</span><span class="input"><input autocomplete="off" id="verifycode" name="verifycode" type="text" style="ime-mode:disabled" class="input01 validate" value="" tabindex="3" maxlength="5"></span></div><div class="verify_text" id="verifytip">输入下图中的字符，不区分大小写</div><div class="pic" id="verifyshow"><img id="imgVerify" width="130" height="53" onload="imgLoadReport()"> <a id="changeimg_link" href="javascript:ptui_changeImg('qq.com', 1002101, true);">换一张</a></div></div></div></div></div><div class="clearer"></div><div class="subcolumn03"><div class="left"><div class="middle"><div class="middle-padder"><div class="logins"><input type="hidden" name="webqq_type" value="10" id="webqq_type"> <input type="hidden" name="remember_uin" value="1" id="remember_uin"> <input type="hidden" name="login2qq" value="1" id="login2qq"> <input type="submit" class="signin-btn signin2" value="" tabindex="6" id="login_button"><div id="loginState" class="login-state-trigger login-state-trigger2 login-state" title="选择在线状态" onclick="return onLoginStateChanged(this,event),!1"><div id="loginStateShow" class="login-state-show online">状态</div><div class="login-state-down">下</div><div class="login-state-txt" id="login2qq_state_txt">在线</div></div></div></div></div><div class="right"></div><div class="clearer"></div></div></div></div><div class="lineright" id="label_unable_tips" style="display:none"><a href="javascript:onClickQLogin()" id="label_switch_qlogin" style="display:none"></a><span id="label_qlogin_tips" style="line-height:18px"></span></div><input type="hidden" name="aid" value="1003903" />
<input type="hidden" name="u1" value="http://web2.qq.com/loginproxy.html" />
<input type="hidden" name="fp" value="loginerroralert" />
<input type="hidden" name="h" value="1" />
<input type="hidden" name="ptredirect" value="0" />
<input type="hidden" name="ptlang" value="2052" />
<input type="hidden" name="daid" value="164" />
 <input type="hidden" name="from_ui" value="1"> <input type="hidden" name="pttype" value="1"> <input type="hidden" name="dumy" value=""></form></div><ul id="loginStatePanel" class="statePanel login-state" style="display:none"><li state="online" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(10)"><div class="stateSelect_icon online"></div><div class="stateSelect_text">我在线上</div></li><li state="callme" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(60)"><div class="stateSelect_icon callme"></div><div class="stateSelect_text">Q我吧</div></li><li state="away" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(30)"><div class="stateSelect_icon away"></div><div class="stateSelect_text">离开</div></li><li state="busy" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(50)"><div class="stateSelect_icon busy"></div><div class="stateSelect_text">忙碌</div></li><li state="silent" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(70)"><div class="stateSelect_icon silent"></div><div class="stateSelect_text">请勿打扰</div></li><li state="hidden" class="statePanel_li" onmouseover="onStateItemMouseOver(this)" onmouseout="onStateItemMouseOut(this)" onclick="onStateItemClick(40)"><div class="stateSelect_icon hidden"></div><div class="stateSelect_text">隐身</div></li></ul></body><script>g_time.time4=new Date();
function onSelectLoad(){}
function onPrePageLoad()
{
	//10:'online',20:'offline',30:'away',40:'hidden',50:'busy',60:'callme',70:'silent'
	ptui_setDefUin(document.getElementById("loginform"), "");	
	var rememCookie = getRememCookie();
	var checkObj = document.getElementById("remember_uin");
	if ((rememCookie&0x04) == 0){
		checkObj.checked=true;
		onClickRemember(checkObj, 0x01, false);
	}
	rememCookie = getRememCookie();
	if ((rememCookie&0x01) != 0){
		checkObj.checked = true;
	}else {
		checkObj.checked = false;
	};
	var getQueryValue = function (url, key) {
	    var reg = new RegExp(
	                        "(^|&|\\?|#)" 
	                        + (key).replace(new RegExp("([.*+?^=!:\x24{}()|[\\]\/\\\\])", "g"), '\\\x241')
	                        + "=([^&]*)(&|\x24)", 
	                    "");
	    var match = url.match(reg);
	    if (match) {
	        return match[2];
	    }
	    
	    return null;
    };
    var login_state = getQueryValue(window.location.search,"login_state");
    if(login_state){
	    var dom = document.getElementById("loginStateShow");
		var input = document.getElementById("webqq_type");
		var txt = document.getElementById("login2qq_state_txt");
		dom.className = "login-state-show " + code2state(login_state);
		txt.innerHTML = code2text(login_state);
		input.value = login_state;
    }
	
	
	
	
	ptui_notifySize('login');
}
function getRememCookie(){
	var iCookieVal = 0;
	var cookieVal = pt.cookie.get("ptui_check_rem_uin");
	if (cookieVal!="" && cookieVal!=null){
		iCookieVal = parseInt(cookieVal);
	}
	return iCookieVal;
}
function setRememCookie(val)
{
	var mytime = new Date();
	mytime.setHours(mytime.getHours() + 24*30);	//配置只保持一个月有效
	pt.cookie.set('ptui_check_rem_uin', val, mytime, '/', 'ui.ptlogin2.qq.com');
}
function onClickRemember(obj,flag, bReverse){
	var iCookieVal = getRememCookie();
	var bSet = obj.checked;
	if (bReverse) bSet = !bSet;
	if (bSet) iCookieVal |= flag;else iCookieVal &= ~(flag);	
	iCookieVal|=4;	
	setRememCookie(iCookieVal);
	return true;
}
function onFormSubmit(form)
{
	if (form.remember_uin.checked){
		return ptui_onLoginEx(form, "qq.com")
	}else{				
		var myDate=new Date();
		myDate.setFullYear(1971,1,1);
		pt.cookie.set("ptui_loginuin",  "", myDate, '/', 'ui.ptlogin2.qq.com');
		return ptui_onLogin(form);
	}
}
function onPageLoad(){
	try{ptui_initFocus(document.getElementById("loginform"))}catch(e){}
	if(document.getElementById("u").value!="QQ号码或Email帐号" && document.getElementById("u").value!=""){
		if(document.getElementById("p").value==""){
			document.getElementById("p").focus();
		}else{
			if(vcode){
				vcode.focus();
			}else{
				document.getElementById("submitbtn").focus();
			}
		}
	}else{
		document.getElementById("u").focus();
	}
	g_time.time5=new Date();
	webLoginReport();
}
function getLogin2QQCookie(){
	var iCookieVal = 0;
	var cookieVal = pt.cookie.get("ptui_login_2_qq");
	if (cookieVal!="" && cookieVal!=null){
		iCookieVal = parseInt(cookieVal);
	}
	return iCookieVal;
}
function setLogin2QQCookie(val)
{
	var mytime = new Date();
	mytime.setHours(mytime.getHours() + 24*30);	//配置只保持一个月有效
	pt.cookie.set('ptui_login_2_qq', val, mytime, '/', 'ui.ptlogin2.qq.com');
}
function setLoginStateCookie(val)
{
	var mytime = new Date();
	mytime.setHours(mytime.getHours() + 24*30);	//配置只保持一个月有效
	pt.cookie.set('ptui_login_state', val, mytime, '/', 'ui.ptlogin2.qq.com');
}
function getLoginStateCookie(){
	var iCookieVal = 0;
	var cookieVal = pt.cookie.get("ptui_login_state");
	if (cookieVal!="" && cookieVal!=null){
		iCookieVal = parseInt(cookieVal);
	}
	return iCookieVal;
}
function code2state(code){
	var map = {10:'online',20:'offline',30:'away',40:'hidden',50:'busy',60:'callme',70:'silent'};
	return map[code] || 'online';
}
function code2text(code){
	var map = {10:'我在线上',20:'离线',30:'离开',40:'隐身',50:'忙碌',60:'Q我吧',70:'请勿打扰'};
	return map[code] || '我在线上';
}
function onClickLoginCheckBox(){
	var input = document.getElementById("login2qq");
	var checkbox = document.getElementById("login2qq_checkbox");
	if(input.value == 1){
		input.value = 0;	
		checkbox.className = "";
	}else{
		input.value = 1;
		checkbox.className = "checked";
	}
	setLogin2QQCookie(input.value);
}
function onLoginStateChanged(trigger, event){
    var getScrollLeft = function(el) {
    	var scrollLeft;
    	if(el){
    		scrollLeft = el.scrollLeft;
    	}else{
    		scrollLeft = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);
    	}
        return scrollLeft || 0;
    };
    var getScrollTop = function(el) {
        var scrollTop;
    	if(el){
    		scrollTop = el.scrollTop;
    	}else{
    		scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);
    	}
        return scrollTop || 0;
    };
	var getClientXY = function(el) {
		var _t = 0,
			_l = 0;
		var isIE = !-[1,];
		if (el) {
			//这里只检查document不够严谨, 在el被侵染置换(jQuery做了这么恶心的事情)
			//的情况下, el.getBoundingClientRect() 调用回挂掉
			if (document.documentElement.getBoundingClientRect && el.getBoundingClientRect) { // 顶IE的这个属性，获取对象到可视范围的距离。
				//现在firefox3，chrome2，opera9.63都支持这个属性。
				var box = {left:0,top:0,right:0,bottom:0};//
				try{
					box=el.getBoundingClientRect();
				}catch(ex){
					return [0,0];
				}
				var oDoc = el.ownerDocument;
				
				var _fix = isIE ? 2 : 0; //修正ie和firefox之间的2像素差异
				
				_t = box.top - _fix + getScrollTop(oDoc);
				_l = box.left - _fix + getScrollLeft(oDoc);
			} else {//这里只有safari执行。
				while (el.offsetParent) {
					_t += el.offsetTop;
					_l += el.offsetLeft;
					el = el.offsetParent;
				}
			}
		}
		return [_l, _t];
	};
	
	var panel = document.getElementById("loginStatePanel");
	if(panel.style.display === "none"){
		var xy = getClientXY(trigger);
		panel.style.left = xy[0] + "px";
		panel.style.top = (xy[1] - 135) + "px";
		panel.style.display = "block";
	}else{
		panel.style.display = "none";
	}
	stopPropagation(event);
}
function onBodyClick(){
	var panel = document.getElementById("loginStatePanel");
	panel.style.display = "none";
	typeof pt != "undefined"?pt.action[0]++:"";
}
function stopPropagation(evt){
	var e=(evt)?evt:window.event; 
	if (window.event) { 
		e.cancelBubble=true; 
	} else { 
		e.stopPropagation(); 
	} 
}
function onStateItemMouseOver(trigger){
	trigger.style.backgroundColor = "#cbe7fc";
}
function onStateItemMouseOut(trigger){
	trigger.style.backgroundColor = "transparent";
}
function onStateItemClick(state){
	var dom = document.getElementById("loginStateShow");
	var input = document.getElementById("webqq_type");
	var txt = document.getElementById("login2qq_state_txt");
	dom.className = "login-state-show " + code2state(state);
	input.value = state;
	txt.innerHTML = code2text(state);
	//setLoginStateCookie(state);
}
document.getElementById("login_button").value="";</script><script>onSelectLoad();</script><script src="../js/10114/comm.js?ptui_identifier=000D92516C912645522DD7EABC2A4481AEF3DC11325701D58410E38C"></script><script>function cleanCache(e){var t=document.createElement("iframe");3==e.split("#").length&&(e=e.substring(0,e.lastIndexOf("#"))),t.src=e,t.style.display="none",document.body.appendChild(t)}function loadScript(e,t){var n=document.createElement("script");n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||("function"==typeof t&&t(),n.onload=n.onreadystatechange=null)},n.onerror=function(){n.onerror=null,t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}function onPageClose(){ptui_notifyClose()}function ptuiV(e){e!=window.g_pt_version&&cleanCache("/clearcache.html#"+location.href)}function checkVersion(){var e=document.createElement("script");e.src="/ptui_ver.js?ptui_identifier=000D92516C912645522DD7EABC2A4414CA305374A941576A900E696A&v="+Math.random(),document.body.appendChild(e)}if("undefined"==typeof ptuiCB){var imgAttr2=new Image;imgAttr2.src=location.protocol+"//ui.ptlogin2.qq.com/cgi-bin/report?id=85289&union=256039";var serverJsPath="../js/"+window.g_pt_version+"/comm.js?max_age=604800&ptui_identifier=000D92516C912645522DD7EABC2A4481AEF3DC11325701D58410E38C";loadScript(serverJsPath,function(){if("undefined"==typeof ptuiCB){var e=document.getElementById("login_button");e&&(e.disabled=!0),imgAttr2.src=location.protocol+"//ui.ptlogin2.qq.com/cgi-bin/report?id=299500"}})}onPrePageLoad(),reloadweb&&loadweblogin(),setTimeout(checkVersion,1500);</script><!--[if !IE]>|xGv00|d3182670b6fd0b656fc489a934e7bd97<![endif]--></html><!--[if !IE]>|xGv00|e9cde27202fb74987f368b1bbba8a2f5<![endif]-->
[11:34:16.912][INFO][GetLoginSigAction:74] loginSig = ZiQCTbNekLX2HeVCTu2ux7sgrm*RphF2ySITSt-hc7JJLFTxRcVZkkyN3*IuV5rA
[11:34:18.346][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=confirmuin, value=0, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:18.347][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptvfsession, value=b2bfd79a8e7fc0f59b46341e1c4d174be663c59bb1c87d60d1a4acda76bd1c54c5ad1b26d41759cdf90cd217a547c182, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:18.348][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptisp, value=ctc, domain=qq.com, path=/, expired=null]
[11:34:18.349][DEBUG][CheckVerifyAction:80] application/x-javascript; charset=utf-8
[11:34:19.670][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=pt2gguin, value=o1002053815, domain=qq.com, path=/, expired=null]
[11:34:19.671][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=uin, value=o1002053815, domain=qq.com, path=/, expired=null]
[11:34:19.672][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=skey, value=@RyHOFR4rj, domain=qq.com, path=/, expired=null]
[11:34:19.672][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ETK, value=, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:19.673][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=superuin, value=o1002053815, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:19.674][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=superkey, value=CUitJrlJvNXN*wMFk-vZ20F-sdPeTP9CI*uLHBumW-0_, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:19.674][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=supertoken, value=48461473, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:19.675][DEBUG][QQHttpCookieJar:94] [Update Cookie] Cookie [name=ptisp, value=ctc, domain=qq.com, path=/, expired=null]
[11:34:19.675][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=RK, value=uBuyu2J8fC, domain=qq.com, path=/, expired=null]
[11:34:19.676][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptuserinfo, value=e8af97e69c88e69cbae599a8e4baba, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:19.676][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptnick_1002053815, value=e8af97e69c88e69cbae599a8e4baba, domain=ptlogin2.qq.com, path=/, expired=null]
[11:34:19.677][DEBUG][QQHttpCookieJar:98] [New Cookie] Cookie [name=ptwebqq, value=371347c4f0cfd4dc1fffb83138e659938ef8179f7df8cd5238e4e14724fe676b, domain=qq.com, path=/, expired=null]
[11:34:19.682][DEBUG][WebLoginAction:80] application/x-javascript; charset=utf-8
[11:34:19.683][INFO][WebLoginAction:159] WebLogin: ptuiCB('0','0','http://ptlogin4.web2.qq.com/check_sig?pttype=1&uin=1002053815&service=login&nodirect=0&ptsigx=06053bb3189fdf5c216836ea37ac8b55f65cab5cf961e910df26e49e9af73166a13c48012b33e24c32f2e4fcc807f0046b60d740d934deb07e9b036b8923287f&s_url=http%3A%2F%2Fweb.qq.com%2Floginproxy.html%3Flogin2qq%3D1%26webqq_type%3D10&f_url=&ptlang=2052&ptredirect=100&aid=1003903&daid=164&j_later=0&low_login_hour=0&regmaster=0&pt_login_type=1&pt_aid=0&pt_aaid=0&pt_light=0','0','登录成功！', '诗月机器人');

[11:34:21.621][DEBUG][CheckLoginSigAction:80] text/html; charset=utf-8
[11:34:21.622][DEBUG][CheckLoginSigAction:90] <!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>登录成功，跳转中...</title>
</head>
<body>
	<div>登录成功，跳转中...</div>
	<script>
		document.domain="qq.com";
		parent.alloy.portal.validatePTLoginSuccess({
			url:document.location.href
		});
	</script>
</body>
</html>
[11:34:21.623][INFO][CheckLoginSigAction:62] checkSig result:<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>登录成功，跳转中...</title>
</head>
<body>
	<div>登录成功，跳转中...</div>
	<script>
		document.domain="qq.com";
		parent.alloy.portal.validatePTLoginSuccess({
			url:document.location.href
		});
	</script>
</body>
</html>
[11:34:21.623][INFO][CheckLoginSigAction:63] Location:null
[11:34:22.543][DEBUG][ChannelLoginAction:80] text/plain; charset=utf-8
[11:34:22.544][DEBUG][ChannelLoginAction:90] {"retcode":0,"result":{"uin":1002053815,"cip":1873604363,"index":1075,"port":51146,"status":"online","vfwebqq":"89c55babf6a8264a634763d6e7550d5783f3a918826954add363ad158e6b533fd094c91c1b2b4393","psessionid":"8368046764001d636f6e6e7365727665725f77656271714031302e3133392e372e3136340000065f000008e9026e0400b720ba3b6d0000000a405279484f465234726a6d0000002889c55babf6a8264a634763d6e7550d5783f3a918826954add363ad158e6b533fd094c91c1b2b4393","user_state":0,"f":0}}

[11:34:23.181][DEBUG][GetFriendInfoAction:80] application/json;charset=utf-8
[11:34:23.181][DEBUG][GetFriendInfoAction:90] {"retcode":0,"result":{"face":645,"birthday":{"month":10,"year":2012,"day":22},"occupation":"","phone":"","allow":1,"college":"","uin":1002053815,"constel":9,"blood":0,"homepage":"","stat":10,"vip_info":0,"country":"中国","city":"东城","personal":"","nick":"诗月机器人","shengxiao":5,"email":"","client_type":41,"province":"北京","gender":"female","mobile":""}}
[11:34:23.216][DEBUG][GetBuddyListAction:80] application/json;charset=utf-8
[11:34:23.216][DEBUG][GetBuddyListAction:90] {"retcode":0,"result":{"friends":[{"flag":204,"uin":1054865208,"categories":3},{"flag":76,"uin":1453116103,"categories":3},{"flag":76,"uin":2543632500,"categories":3},{"flag":76,"uin":2804269092,"categories":3},{"flag":76,"uin":1446156669,"categories":3},{"flag":204,"uin":141096315,"categories":3},{"flag":0,"uin":3629765066,"categories":0},{"flag":0,"uin":1204783873,"categories":0}],"marknames":[{"uin":141096315,"markname":"我是識月","type":0},{"uin":1204783873,"markname":"name11","type":0}],"categories":[{"index":1,"sort":1,"name":"朋友"},{"index":2,"sort":2,"name":"家人"},{"index":3,"sort":3,"name":"同学"}],"vipinfo":[{"vip_level":0,"u":1054865208,"is_vip":0},{"vip_level":0,"u":1453116103,"is_vip":0},{"vip_level":0,"u":2543632500,"is_vip":0},{"vip_level":0,"u":2804269092,"is_vip":0},{"vip_level":0,"u":1446156669,"is_vip":0},{"vip_level":0,"u":141096315,"is_vip":0},{"vip_level":0,"u":3629765066,"is_vip":0},{"vip_level":0,"u":1204783873,"is_vip":0}],"info":[{"face":789,"flag":285213184,"nick":"立新","uin":1054865208},{"face":147,"flag":4194816,"nick":"牛得草","uin":1453116103},{"face":234,"flag":25182720,"nick":"小鹏★快跑","uin":2543632500},{"face":147,"flag":512,"nick":"飘动的心","uin":2804269092},{"face":525,"flag":8389120,"nick":"和天下","uin":1446156669},{"face":765,"flag":285737474,"nick":"我是識月","uin":141096315},{"face":300,"flag":4719104,"nick":"Joker","uin":3629765066},{"face":570,"flag":8388608,"nick":"name","uin":1204783873}]}}
[11:34:23.446][DEBUG][GetGroupListAction:80] application/json;charset=utf-8
[11:34:23.446][DEBUG][GetGroupListAction:90] {"retcode":0,"result":{"gmasklist":[{"gid":1000,"mask":0},{"gid":2486815837,"mask":0},{"gid":753811636,"mask":0},{"gid":3076894007,"mask":2},{"gid":2022162072,"mask":2},{"gid":3101629394,"mask":0}],"gnamelist":[{"flag":185598993,"name":"webqq3.0研究","gid":810766009,"code":2293286561},{"flag":722469905,"name":"IT诺曼底⑧-WEB","gid":2313060007,"code":2569495759},{"flag":185598993,"name":"JAVA技术交流","gid":753811636,"code":685102944},{"flag":16778241,"name":"逆向设计交流群","gid":1151464851,"code":2929652165},{"flag":16778241,"name":"Android创业群","gid":2890557560,"code":2840543000},{"flag":16778241,"name":"QQ协议学院1号店","gid":595589252,"code":3954681017},{"flag":1091568641,"name":"IT人小镇在线求助II","gid":3076894007,"code":417201558},{"flag":16778241,"name":"leegean","gid":2486815837,"code":2383936350},{"flag":184550417,"name":"iQQ","gid":1463936535,"code":176506217},{"flag":16778241,"name":"TCP、HTTP协议分析群","gid":160809244,"code":2361031398},{"flag":184550417,"name":"云南应用开发技术群","gid":3026872516,"code":1617437855},{"flag":16778241,"name":"开源社区","gid":667854054,"code":4063329942},{"flag":16778241,"name":"ys","gid":3101629394,"code":2684670111},{"flag":16778241,"name":"伊娃","gid":2756716335,"code":1691425700}],"gmarklist":[]}}
[11:34:36.828][DEBUG][ThreadActorDispatcher:94] QQActorDispatcher leave action loop...
